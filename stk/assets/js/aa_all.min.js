function getSelect2(){$("select.select2-input").select2()}function pictureUpload(){$(".image-editor").cropit()}function populateYearOption(e){var o=$("#"+e);o.empty(),o.append('<option></option><option value="2016">2016</option><option value="2015">2015</option><option value="2014">2014</option><option value="2013">2013</option><option value="2012">2012</option><option value="2011">2011</option><option value="2010">2010</option><option value="2009">2009</option><option value="2008">2008</option><option value="2007">2007</option><option value="2006">2006</option><option value="2005">2005</option><option value="2004">2004</option><option value="2003">2003</option><option value="2002">2002</option><option value="2001">2001</option><option value="2000">2000</option><option value="1999">1999</option><option value="1998">1998</option><option value="1997">1997</option><option value="1996">1996</option><option value="1995">1995</option><option value="1994">1994</option><option value="1993">1993</option><option value="1992">1992</option><option value="1991">1991</option><option value="1990">1990</option><option value="1989">1989</option><option value="1988">1988</option><option value="1987">1987</option><option value="1986">1986</option><option value="1985">1985</option><option value="1984">1984</option><option value="1983">1983</option><option value="1982">1982</option><option value="1981">1981</option><option value="1980">1980</option><option value="1979">1979</option><option value="1978">1978</option><option value="1977">1977</option><option value="1976">1976</option><option value="1975">1975</option><option value="1974">1974</option><option value="1973">1973</option><option value="1972">1972</option><option value="1971">1971</option><option value="1970">1970</option><option value="1969">1969</option><option value="1968">1968</option><option value="1967">1967</option><option value="1966">1966</option><option value="1965">1965</option><option value="1964">1964</option><option value="1963">1963</option><option value="1962">1962</option><option value="1961">1961</option><option value="1960">1960</option><option value="1959">1959</option><option value="1958">1958</option><option value="1957">1957</option><option value="1956">1956</option><option value="1955">1955</option><option value="1954">1954</option><option value="1953">1953</option><option value="1952">1952</option><option value="1951">1951</option><option value="1950">1950</option><option value="1949">1949</option><option value="1948">1948</option><option value="1947">1947</option><option value="1946">1946</option><option value="1945">1945</option><option value="1944">1944</option><option value="1943">1943</option><option value="1942">1942</option><option value="1941">1941</option><option value="1940">1940</option><option value="1939">1939</option><option value="1938">1938</option><option value="1937">1937</option><option value="1936">1936</option><option value="1935">1935</option><option value="1934">1934</option><option value="1933">1933</option><option value="1932">1932</option><option value="1931">1931</option><option value="1930">1930</option><option value="1929">1929</option><option value="1928">1928</option><option value="1927">1927</option><option value="1926">1926</option><option value="1925">1925</option><option value="1924">1924</option><option value="1923">1923</option><option value="1922">1922</option><option value="1921">1921</option><option value="1920">1920</option><option value="1919">1919</option><option value="1918">1918</option><option value="1917">1917</option><option value="1916">1916</option><option value="1915">1915</option><option value="1914">1914</option><option value="1913">1913</option><option value="1912">1912</option><option value="1911">1911</option><option value="1910">1910</option><option value="1909">1909</option><option value="1908">1908</option><option value="1907">1907</option><option value="1906">1906</option><option value="1905">1905</option>')}function populateMonthOption(e){var o=$("#"+e);o.empty(),o.append('<option></option><option value="1">Jan</option><option value="2">Feb</option><option value="3">Mar</option><option value="4">Apr</option><option value="5">May</option><option value="6">Jun</option><option value="7">Jul</option><option value="8">Aug</option><option value="9">Sep</option><option value="10">Oct</option><option value="11">Nov</option><option value="12">Dec</option>')}function populateDayOption(e){var o=$("#"+e);o.empty(),o.append('<option></option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option><option value="11">11</option><option value="12">12</option><option value="13">13</option><option value="14">14</option><option value="15">15</option><option value="16">16</option><option value="17">17</option><option value="18">18</option><option value="19">19</option><option value="20">20</option><option value="21">21</option><option value="22">22</option><option value="23">23</option><option value="24">24</option><option value="25">25</option><option value="26">26</option><option value="27">27</option><option value="28">28</option><option value="29">29</option><option value="30">30</option><option value="31">31</option>')}function populateAlphabet(){var e=$("#selectAlphabet");e.empty(),e.append('<option value="A">A</option><option value="B">B</option><option value="C">C</option><option value="D">D</option><option value="E">E</option><option value="F">F</option><option value="G">G</option><option value="H">H</option><option value="I">I</option><option value="J">J</option><option value="K">K</option><option value="L">L</option><option value="M">M</option><option value="N">N</option><option value="O">O</option><option value="P">P</option><option value="Q">Q</option><option value="R">R</option><option value="S">S</option><option value="T">T</option><option value="U">U</option><option value="V">V</option><option value="W">W</option><option value="X">X</option><option value="Y">Y</option><option value="Z">Z</option>')}function hideAddress(e){$("#"+e+"province").hide("fast"),$("#"+e+"district").hide("fast"),$("#"+e+"sector").hide("fast"),$("#"+e+"cell").hide("fast"),$("#"+e+"city").hide("fast")}function nationalitySelected2(){$("#SelectNationality").select2().bind("change",populateCountry)}function birthAddressSelect2(){$("#BP_SelectCountry").select2().bind("change",function(){populateProvince("BP_")}).trigger("change"),$("#BP_SelectProvince").select2().bind("change",function(){populateDistrict("BP_")}).trigger("change"),$("#BP_SelectDistrict").select2().bind("change",function(){populateSector("BP_")}).trigger("change"),$("#BP_SelectSector").select2().bind("change",function(){populateCell("BP_")}).trigger("change"),$("#BP_SelectCell").select2()}function ResidenceAddressSelect2(){$("#RA_SelectCountry").select2().bind("change",function(){populateProvince("RA_")}).trigger("change"),$("#RA_SelectProvince").select2().bind("change",function(){populateDistrict("RA_")}).trigger("change"),$("#RA_SelectDistrict").select2().bind("change",function(){populateSector("RA_")}).trigger("change"),$("#RA_SelectSector").select2().bind("change",function(){populateCell("RA_")}).trigger("change"),$("#RA_SelectCell").select2()}function NKResidenceAddressSelect2(){$("#NK_SelectCountry").select2().bind("change",function(){populateProvince("NK_")}).trigger("change"),$("#NK_SelectProvince").select2().bind("change",function(){populateDistrict("NK_")}).trigger("change"),$("#NK_SelectDistrict").select2().bind("change",function(){populateSector("NK_")}).trigger("change"),$("#NK_SelectSector").select2().bind("change",function(){populateCell("NK_")}).trigger("change"),$("#NK_SelectCell").select2()}function populateCountry(){var e=$("#SelectNationality").select2("val");$("#BP_province").hide("fast"),$("#BP_district").hide("fast"),$("#BP_sector").hide("fast"),$("#BP_cell").hide("fast"),$("#BP_city").hide("fast"),$("#BP_SelectProvince").select2("val","").trigger("change"),$("#BP_SelectDistrict").select2("val","").trigger("change"),$("#BP_SelectSector").select2("val","").trigger("change"),$("#BP_SelectCell").select2("val","").trigger("change"),$("#BP_SelectCountry").val(e).trigger("change")}function populateProvince(e){var o=$("#"+e+"SelectCountry").select2("val");if($("#"+e+"province").hide("fast"),$("#"+e+"district").hide("fast"),$("#"+e+"sector").hide("fast"),$("#"+e+"cell").hide("fast"),$("#"+e+"city").hide("fast"),$("#"+e+"SelectProvince").select2("val","").trigger("change"),$("#"+e+"SelectDistrict").select2("val","").trigger("change"),$("#"+e+"SelectSector").select2("val","").trigger("change"),$("#"+e+"SelectCell").select2("val","").trigger("change"),console.log("CountryID"),console.log(o),1==o||2==o||27==o||78==o){var t=base_url+"api/Pd/Country/Province/"+o;$.ajax({url:t,type:"GET",dataType:"json",success:function(o){var t=$("#"+e+"SelectProvince");t.empty(),t.append("<option ></option>");for(var n=0;n<o.length;n++)t.append('<option value="'+o[n].id+'">'+o[n].name+"</option>")}}).done(function(o){$("#"+e+"province").show("slow")})}else $("#"+e+"city").show("slow")}function populateDistrict(e){var o=$("#"+e+"SelectProvince").select2("val");if($("#"+e+"sector").hide("fast"),$("#"+e+"cell").hide("fast"),$("#"+e+"city").hide("fast"),$("#"+e+"SelectDistrict").select2("val","").trigger("change"),$("#"+e+"SelectSector").select2("val","").trigger("change"),$("#"+e+"SelectCell").select2("val","").trigger("change"),o>0){var t=base_url+"api/Pd/Province/District/"+o;$.ajax({url:t,type:"GET",dataType:"json",success:function(o){var t=$("#"+e+"SelectDistrict");t.empty(),t.append("<option ></option>");for(var n=0;n<o.length;n++)t.append('<option value="'+o[n].id+'">'+o[n].name+"</option>")}}).done(function(o){$("#"+e+"district").show("slow")})}}function populateSector(e){var o=$("#"+e+"SelectDistrict").select2("val");if($("#"+e+"cell").hide("fast"),$("#"+e+"city").hide("fast"),$("#"+e+"SelectSector").select2("val","").trigger("change"),$("#"+e+"SelectCell").val("").trigger("change"),o>0){var t=base_url+"api/Pd/District/Sector/"+o;$.ajax({url:t,type:"GET",dataType:"json",success:function(o){var t=$("#"+e+"SelectSector");t.empty(),t.append("<option ></option>");for(var n=0;n<o.length;n++)t.append('<option value="'+o[n].id+'">'+o[n].name+"</option>")}}).done(function(o){$("#"+e+"sector").show("slow")})}}function populateCell(e){var o=$("#"+e+"SelectSector").select2("val");if($("#"+e+"SelectCell").val("").trigger("change"),o>0){var t=base_url+"api/Pd/Sector/Cell/"+o;$.ajax({url:t,type:"GET",dataType:"json",success:function(o){var t=$("#"+e+"SelectCell");t.empty(),t.append("<option ></option>");for(var n=0;n<o.length;n++)t.append('<option value="'+o[n].id+'">'+o[n].name+"</option>")}}).done(function(o){$("#"+e+"city").hide("fast"),$("#"+e+"cell").show("slow")})}}function showAlive(e){switch(e){case 1:$("#fa_alivePeronInfo").slideDown();break;case 2:$("#mo_alivePeronInfo").slideDown()}}function hideAlive(e){var o=$("#selectStudentNewPrimarycontact");switch(o.select2("val","").trigger("change"),e){case 1:o.find("option[value=1]").attr("disabled",!0),$("#fa_alivePeronInfo").slideUp();break;case 2:o.find("option[value=2]").attr("disabled",!0),$("#mo_alivePeronInfo").slideUp()}}function pullDegreeLevel(){var e=base_url+"api/Pd/DegreeLevel/";$.getJSON(e,function(e){$.each(e,function(e,o){var t=[];t.id=o.id,t.text=o.name,optionsLevel.splice(e,0,t)})}).done(function(){select2GenerateNewOption("level_0",optionsLevel)}).fail(function(){}).always(function(){})}function pullInstitution(){var e=base_url+"api/Pd/DegreeInstitution/";$.getJSON(e,function(e){$.each(e,function(e,o){var t=[];t.id=o.id,t.text=o.name,optionsInstitution.splice(e,0,t)})}).done(function(){select2GenerateNewOption("institution_0",optionsInstitution)}).fail(function(){}).always(function(){})}function pullField(){var e=base_url+"api/Pd/DegreeField/";$.getJSON(e,function(e){$.each(e,function(e,o){var t=[];t.id=o.id,t.text=o.name,optionsField.splice(e,0,t)})}).done(function(){select2GenerateNewOption("field_0",optionsField)}).fail(function(){}).always(function(){})}function firstDegree(){$.when(pullDegreeLevel(),pullInstitution(),pullField()).done(function(e,o,t){})}function initDegree(){firstDegree()}function appendNewDegree(){degreeNumber++;var e='<div class="col-sm-12" class="row" id="row_'+degreeNumber+'"  >';e+='<div class="col-sm-3"><input name="level_'+degreeNumber+'" type="hidden" id="level_'+degreeNumber+'" class="form-control" /></div>',e+='<div class="col-sm-4"><input name="institution_'+degreeNumber+'" type="hidden" id="institution_'+degreeNumber+'" class="form-control" /></div>',e+='<div class="col-sm-3"><input name="field_'+degreeNumber+'" type="hidden" id="field_'+degreeNumber+'" class="form-control" /></div>',e+='<div class="col-sm-2">',e+='<div class="col-sm-6"><label><input type="radio" name="status_'+degreeNumber+'" value="1" checked> Yes</label></div>',e+='<div class="col-sm-6"><label><input type="radio" name="status_'+degreeNumber+'" value="0" > No</label></div>',e+="</div>",e+="</div>",$(e).appendTo("#staffDegrees").hide().fadeIn(1e3),select2GenerateNewOption("level_"+degreeNumber,optionsLevel),select2GenerateNewOption("institution_"+degreeNumber,optionsInstitution),select2GenerateNewOption("field_"+degreeNumber,optionsField),$("#numberOfDegree").val(degreeNumber)}function classroomformatSelection(e){var o=$(e.element);return e.id>0?o.data("yearname")+" : "+e.text:e.text}function classroomformatResult(e){return e.text}function subjectformatSelection(e){if(e.id>0){var o=$(e.element);return o.data("yearname")+" :  "+e.text}return e.text}function subjectformatResult(e){return e.text}function classroomSubjectformatSelection(e){var o=$(e.element);return o.data("classname")+" :  "+e.text}function classroomSubjectformatResult(e){return e.text}function ab_page_necessity(){$('[data-toggle="tooltip"]').tooltip({placement:"top"}),$(".datepicker").datepicker(),$(".easyTicker-new-payment").easyTicker({visible:1,interval:4e3})}function formatNumber(e){return e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}function INPUTStudent_formatSelection(e){return e.id>0?"<img class='img-circle' style='max-width:50px; max-height:50px;' src='images/student/50/"+e.id+"/0' /> "+e.text:e.text}function INPUTStudent_formatResult(e){return e.id>0?"<img class='img-circle' style='max-width:50px; max-height:50px;' src='images/student/50/"+e.id+"/0' /> "+e.text:e.text}function ab_moment(e){e=moment.unix(e).zone("+0200").format("YYYY-MM-DD");var o=moment();o=o.format("YYYY-MM-DD");var t;return t=e>o?"<span class='text-green'>"+moment(e).countdown(o).toString()+" left </span>":o>e?"<span class='text-red'>"+moment(e).fromNow()+"</span>":"<span class='text-blue'>today</span>"}function ab_moment_plus(e){e=moment.unix(e).zone("+0200").format("YYYY-MM-DD");var o=moment();o=o.format("YYYY-MM-DD");var t;return t=e>o?"<span >"+moment(e).countdown(o).toString()+"</span> from today":o>e?"<span >"+moment(e).from(o)+"</span>":"<span >today</span>"}function date_moment(e){return moment.unix(e).zone("+0200").format("DD-MM-YYYY")}function date_HM_moment(e){return moment.unix(e).zone("+0200").format("DD/MM/YYYY - hh:mm")}function Select2ClassroomformatSelection(e){if(console.log("Excuted"),e.id>0){var o=$(e.element);return o.data("yearname")+" "+e.text}return e.text}function Select2ClassroomformatResult(e){return e.text}function ClassroomCongestion(e,o){var t=o-e;return t>0?'<span class="text-green">'+t+" available</span>":0>t?'<span class="text-red">'+Math.abs(t)+" exceeded</span>":0==t?'<span class="text-blue"><i class="fa"></i>Full</span>':void 0}function select2GenerateNewOption(e,o){$("#"+e).select2({createSearchChoice:function(e,o){return 0===$(o).filter(function(){return 0===this.text.localeCompare(e)}).length?{id:e,text:e}:void 0},multiple:!1,data:o})}function select2GenerateNewMupliple(e,o){$("#"+e).select2({createSearchChoice:function(e,o){return 0===$(o).filter(function(){return 0===this.text.localeCompare(e)}).length?{id:e,text:e}:void 0},multiple:!0,data:o})}function getDashboard(){var e=($("#moduleContainer"),base_url+"dashboard");$.ajax({url:e,type:"GET",dataType:"html",timeout:12e4}).done(function(e){$("#moduleContainer").html(e)}).fail(function(){var e="";e+='<aside class="right-side">',e+='<section class="content-header">',e+='<div id="dashSubmenu">',e+="</div>",e+="</section>",e+='<section class="content">',e+='<div class="grid text-center">',e+='<div class="alert alert-warning">',e+='<div class="row">',e+="Something went wrong! Check your internet and try again",e+="</div>",e+='<div class="row top-buffer">',e+="<strong><a href='#' onclick='getDashboard()' ><i class='fa fa-refresh'></i>&nbsp;&nbsp;Try again</a></strong>",e+="</div>",e+="</div>",e+="</div>",e+="</section>",e+="</aside>",$("#moduleContainer").html(e)}).always(function(){})}function abDataTable(){$("table.abDataTable").dataTable()}function abDataTableNoSection(){$("table.abDataTable").dataTable({aaSorting:[]})}function abTablePagingTable(e){$("#"+e).dataTable({aaSorting:[],language:{searchPlaceholder:"Search here... "}})}function abTableNoPaging(e){$("#"+e).dataTable({paging:!1,aaSorting:[]})}function abTableNoPaging(e){$("#"+e).dataTable({paging:!1,aaSorting:[]})}function abTableCostumArg(e,o,t){$("#"+e).dataTable({paging:!1,aaSorting:[]})}function changeAcademicYear(e,o){var t=base_url+"changeSchoolDefaultAcademicYear/"+e;$.getJSON(t,function(e){console.log(e),e.success?($("#ab_currentAC").text(o),$.gritter.add({title:"Success",text:"Current Academic year changed.",class_name:"success gritter-center",time:""})):$.gritter.add({title:"Failed",text:"Changing Current academic year failed.",class_name:"danger gritter-center",time:""})}).done(function(){}).fail(function(){$.gritter.add({title:"Can't changed academic year",text:"Something went wrong!.",class_name:"warning gritter-center",time:""})}).always(function(){})}function changeTerm(e,o,t,n){$("#ab_currentTerm").text("Changing, please wait ...");var i=base_url+"changeSchoolDefaultTerm/"+e;$.getJSON(i,function(e){e.success?($("#ab_currentTerm").html("<i>Academic Year</i>: "+t+" - <i>"+n+"</i>: "+o),$.gritter.add({title:"Success",text:"Current Term changed.",class_name:"success gritter-center",time:""}),getDashboard()):($("#ab_currentTerm").html("Failed, try again"),$.gritter.add({title:"Failed",text:"Changing Current term failed.",class_name:"danger gritter-center",time:""}))}).done(function(){}).fail(function(){$("#ab_currentTerm").html("Failed, check your internet and try again"),$.gritter.add({title:"Can't changed the term",text:"Something went wrong!.",class_name:"warning gritter-center",time:""})}).always(function(){})}var degreeNumber=0,optionsLevel=[],optionsInstitution=[],optionsField=[],base_url="";$(document).ajaxError(function(e,o,t,n){"Unauthorized"==n&&($("#Model_LoginAgain").modal({keyboard:!1,backdrop:"static"}),$("#Model_LoginAgain").on("shown.bs.modal",function(){$("#LoginAgainPassword").focus()}))}),window.onload=getDashboard();